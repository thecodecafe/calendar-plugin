var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};!function(ce){var de={ACTIVE:"active",LOADER_SHOW:"show-loader",CONTAINER:"cp-container",CALENDAR:"cp-calendar",MONTH_CALENDAR:"cp-calendar-{month}",SEASON_CALENDAR:"cp-calendar-{season}",HEADER:"cp-header",HEADER_CONTENT:"cp-header-content",HEADER_OPTIONS_CONTAINER:"cp-header-options-container",HEADER_OPTIONS:"cp-header-options",HEADER_OPTIONS_INNER:"cp-header-options-inner",HEADER_OPTIONS_BUTTONS_CONTAINER:"cp-header-options-buttons-container",HEADER_OPTIONS_BUTTON:"cp-header-options-button",HEADER_OPTIONS_ABOVE:"cp-header-options-above",HEADER_OPTIONS_VISIBLE:"cp-header-options-visible",NAV_CONTROLS:"cp-nav-controls",CONTROLS_CONTAINER:"cp-nav",MONTH_HEADER:"cp-header-{month}",SEASON_HEADER:"cp-header-{season}",DATE_CELL:"cp-date",DATE_DAY:"cp-day",DATE_SELECTED:"cp-date-selected",DATE_CELL_CONTENT:"cp-date-content",WEEK_ROW:"cp-week",WEEK_EVENTS:"cp-week-events",MONTH_HEADING:"cp-month-heading",MONTH_CELL:"cp-month",MONTH_NAME_BUTTON:"cp-month-name",EMPTY_DAY:"cp-empty-day",EMPTY_DAY_BEGINNING:"cp-empty-day-beginning",EMPTY_DAY_ENDING:"cp-empty-day-ending",ADD_MENU_CONTAINER:"cp-add-menu",ADD_MENU_INNER:"cp-add-menu-inner",ADD_MENU_BUTTONS_CONTAINER:"cp-add-menu-buttons-container",ADD_MENU_BUTTON:"cp-add-menu-button",ADD_MENU_ABOVE:"cp-add-menu-above",ADD_MENU_VISIBLE:"cp-add-menu-visible",EVENT_MENU_CONTAINER:"cp-event-menu",EVENT_MENU_INNER:"cp-event-menu-inner",EVENT_MENU_BUTTONS_CONTAINER:"cp-event-menu-buttons-container",EVENT_MENU_BUTTON:"cp-event-menu-button",EVENT_MENU_ABOVE:"cp-event-menu-above",EVENT_MENU_VISIBLE:"cp-event-menu-visible",VIEWS_LIST_CONTAINER:"cp-view-list-container",VIEWS_LIST:"cp-view-list",VIEWS_ITEM:"cp-view",VIEW_BUTTON:"cp-view-button"},ue={BODY:"body",CONTAINER:".cp-container",CONTAINER_ID:"cp-container-id",CALENDAR:".cp-calendar",HEADER:".cp-header",HEADER_CONTENT:".cp-header-content",HEADER_OPTIONS_CONTAINER:".cp-header-options-container",HEADER_OPTIONS:".cp-header-options",HEADER_OPTIONS_INNER:".cp-header-options-inner",HEADER_OPTIONS_BUTTONS_CONTAINER:".cp-header-options-buttons-container",HEADER_OPTIONS_BUTTON:".cp-header-options-button",HEADER_OPTIONS_ABOVE:".cp-header-options-above",HEADER_OPTIONS_VISIBLE:".cp-header-options-visible",NAV_CONTROLS:".cp-nav-controls",CONTROL_BUTTONS:"button.cp-nav",DATE_CELL:".cp-date",DATE_DAY:".cp-day",DATE_SELECTED:".cp-date-selected",DATE_CELL_CONTENT:".cp-date-content",WEEK_ROW:".cp-week",WEEK_EVENTS:".cp-week-events",MONTH_HEADING:".cp-month-heading",MONTH_CELL:".cp-month",MONTH_NAME_BUTTON:".cp-month-name",EMPTY_DAY:".cp-empty-day",EMPTY_DAY_BEGINNING:".cp-empty-day-beginning",EMPTY_DAY_ENDING:".cp-empty-day-ending",ADD_MENU_CONTAINER:".cp-add-menu",ADD_MENU_INNER:".cp-add-menu-inner",ADD_MENU_BUTTON:".cp-add-menu-button",ADD_MENU_BUTTONS_CONTAINER:".cp-add-menu-buttons-container",EVENT_MENU_CONTAINER:".cp-event-menu",EVENT_MENU_INNER:".cp-event-menu-inner",EVENT_MENU_BUTTON:".cp-event-menu-button",EVENT_MENU_BUTTONS_CONTAINER:".cp-event-menu-buttons-container",VIEWS_LIST_CONTAINER:".cp-view-list-container",VIEWS_LIST:".cp-view-list",VIEWS_ITEM:".cp-view",VIEW_BUTTON:".cp-view-button",VIEW_SELECTOR:'[data-toggle="calendar-view"]',EVENT_FORM_MODAL:".cp-ef-modal",EXPORT_BUTTON:'[data-export="calendar"]'},he={CONTAINER:"<div class='"+de.CONTAINER+"' id='"+ue.CONTAINER_ID+"'>{header}{calendar}{add_menu}{event_menu}</div>",MAIN:"<table class='"+de.CALENDAR+" {classnames}'  cellspacing='0' cellpadding='0'><thead>{heading}</thead><tbody>{content}</tbody></table>",DAYS_HEADING:"<tr class='"+de.MONTH_HEADING+"'> <th>Sun</th> <th>Mon</th> <th>Tue</th> <th>Wed</th> <th>Thur</th> <th>Fri</th> <th>Sat</th> </tr>",WEEK_ROW:"<tr class='"+de.WEEK_ROW+"' data-row='{row}'>{content}</tr>",DAY_CELL:"<td class='"+de.DATE_CELL+" {classnames}' data-date='{date}'><div class='"+de.DATE_CELL_CONTENT+"'>{content}</div></td>",HEADER:"<div class='"+de.HEADER+" {classnames}'><div class='"+de.NAV_CONTROLS+"'>{left-control}{right-control}</div><div class='"+de.HEADER_CONTENT+"'><div class='"+de.HEADER_OPTIONS_CONTAINER+"'><button class='"+de.MONTH_NAME_BUTTON+"'>{month}<span class='caret'></span></button><div class='"+de.HEADER_OPTIONS+"' id='headerOptionsComponent'><div class='"+de.HEADER_OPTIONS_INNER+"'><div class='"+de.HEADER_OPTIONS_BUTTONS_CONTAINER+"'><a class='"+de.HEADER_OPTIONS_BUTTON+"' href='javascript:;' data-export='calendar' data-format='pdf'>Export to .pdf</a><a class='"+de.HEADER_OPTIONS_BUTTON+"' href='javascript:;' data-export='calendar' data-format='docx'>Export to .docx</a></div><span class='caret'></span></div></div></div></div>{view-options}</div>",VIEWS:"<div class='"+de.VIEWS_LIST_CONTAINER+"'><ul class='"+de.VIEWS_LIST+"'><li class='"+de.VIEWS_ITEM+"'><button type='button' class='"+de.VIEW_BUTTON+" daily' data-toggle='calendar-view' data-option='daily'>Daily</button></li><li class='"+de.VIEWS_ITEM+"'><button type='button' class='"+de.VIEW_BUTTON+" weekly' data-toggle='calendar-view' data-option='weekly'>Weekly</button></li><li class='"+de.VIEWS_ITEM+"'><button type='button' class='"+de.VIEW_BUTTON+" monthly' data-toggle='calendar-view' data-option='monthly'>Monthly</button></li></ul></div>",CONTROL:"<button class='"+de.CONTROLS_CONTAINER+"' type='submit' {direction}>{label}</button>",ADD_MENU:"<div class='"+de.ADD_MENU_CONTAINER+"' id='addMenuComponent'><div class='"+de.ADD_MENU_INNER+"'><div class='"+de.ADD_MENU_BUTTONS_CONTAINER+"'><button class='"+de.ADD_MENU_BUTTON+"' type='button' data-action='add-event'>Add Event</button><button class='"+de.ADD_MENU_BUTTON+" cancel' data-action='cancel' type='button'>Cancel</button></div><span class='caret'></span></div></div>"},fe={spring:{display_name:"Spring",months:[3,4,5,6]},summer:{display_name:"Summer",months:[7,8,9]},fall:{display_name:"Fall",months:[10,11]},winter:{display_name:"Winter",months:[12,1,2]}},pe=["January","February","March","April","May","June","July","August","September","October","November","December"],e=new function(){var _=this;_.now=new Date,_.selection=[],_.createFormModal=null,_.editFormModal=null,_.events=[],_.eventInstances=[],_.viewOptions=["daily","weekly","monthly"];var o=moment(moment().format("YYYY-MM-DD 00:00:00")),l=moment(o).add(6,"days"),a=moment();_.settings={},_.init=function(e){_.el=this,_.settings=ce.extend({month:_.now.getMonth()+1,year:_.now.getFullYear(),dayStyle:"short",cellMaxHeigh:200,respData:"data",id:"id",title:"title",startDate:"startDate",endDate:"endDate",startTime:"startTime",endTime:"endTime",creatRequest:null,editRequest:null,view:"monthly",changableView:!0,form:[],disableForm:!1},e);var t=ce.extend(fe,e?e.seasons:{});return _.settings.seasons=t,(_.settings.month<1||12<_.settings.month)&&(_.settings.month=1),setupForm(),s(),"destroy"==e&&_.destroy(),_};var s=function(){e(),_.createFormModal=new CPEventFormModal("new-event"+_.now.getTime(),{url:_.settings.createUrl||_.settings.url||null,data:_.settings.data,headers:_.settings.headers,onSaved:Z,requestStruct:_.settings.creatRequest||null,fieldsList:_.settings.form}),_.createFormModal.render(),_.editFormModal=new CPEventFormModal("edit-event"+_.now.getTime(),{editting:!0,url:_.settings.editUrl||_.settings.url||null,deleteUrl:_.settings.deleteUrl||_.settings.url||null,data:_.settings.data,headers:_.settings.headers,onSaved:Z,onDelete:Z,requestStruct:_.settings.editRequest||null,fieldsList:_.settings.form}),_.editFormModal.render()};setupForm=function(){var e=_.settings.form,t={};if(e&&e.constructor==Array)for(var n=0;n<e.length;n++)if(null!=e[n])if(e[n].constructor==Array)for(var i=0;i<e[n].length;i++)t[e[n][i].name]=_extends({},e[n][i]);else console.warn("Form structure malformed at fields list "+n+" form must have the following structure in order to render. Array<Array<object>>")};var e=function(){var e="";switch(_.settings.view){case"daily":e=n();break;case"weekly":e=t();break;case"monthly":e=v(m())}ce(_.el).html(""),ce(e).prependTo(ce(_.el)),Z(),p()},t=function(){return"<div class='"+de.CONTAINER+"' id='"+ue.CONTAINER_ID+"'>"+b("weekly")+"<table class='"+de.CALENDAR+" weekly'  cellspacing='0' cellpadding='0'><thead>"+d()+"</thead><tbody>"+u()+"</tbody></table>"+y()+N()+"</div>"},n=function(){return"<div class='"+de.CONTAINER+"' id='"+ue.CONTAINER_ID+"'>"+b("daily")+"<table class='"+de.CALENDAR+" daily'  cellspacing='0' cellpadding='0'><thead>"+r()+"</thead><tbody>"+c()+"</tbody></table>"+y()+N()+"</div>"},N=function(){return("\n                <div class='"+de.EVENT_MENU_CONTAINER+"' id='eventMenuComponent'>\n                    <div class='"+de.EVENT_MENU_INNER+"'>\n                        <div class='"+de.EVENT_MENU_BUTTONS_CONTAINER+"'>\n                            <button class='"+de.EVENT_MENU_BUTTON+"' type='button' data-action='edit-event'>Edit Event</button>\n                            <button class='"+de.EVENT_MENU_BUTTON+"' type='button' data-action='copy-event'>Copy Event</button>\n                            <button class='"+de.EVENT_MENU_BUTTON+" cancel' data-action='cancel' type='button'>Cancel</button>\n                        </div>\n                        <span class='caret'></span>\n                    </div>\n                </div>\n            ").trim()},r=function(){return'<tr class="'+de.MONTH_HEADING+'"><th>Time</th><th></th></tr>'},c=function(){for(var e,t=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],n="",i=0;i<t.length;i++)e=12<=i?"PM":"AM",n+='<tr class="'+de.WEEK_ROW+' daily">\n                            <td>'+le(t[i])+" "+e+'</td>\n                            <td class="'+de.DATE_CELL+" "+de.DATE_DAY+'" data-date="'+moment(a.format("YYYY-MM-DD "+le(t[i])+":00:00")).get("time")+'">\n                                <div class="'+de.DATE_CELL_CONTENT+'"></div>\n                            </td>\n                        </tr>';return n},d=function(){for(var e='<tr class="'+de.MONTH_HEADING+'"><th>Time</th>',t=o.get("time");t<=l.get("time");t+=864e5)e+="<th >"+moment(t).format("ddd DD")+"</th>";return e+="</tr>"},u=function(){for(var e,t,n,i=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],a="",s=0;s<i.length;s++){n=12<=s?"PM":"AM",e=le(i[s])+" "+n,a+='<tr class="'+de.WEEK_ROW+' weekly"><td style=" text-align: right; padding-right: 15px;">'+e+"</td>";for(var r=o.get("time");r<=l.get("time");r+=864e5)t=moment(moment(r).format("YYYY-MM-DD ")+le(i[s])+":00:00"),a+='<td class="'+de.DATE_CELL+" "+de.DATE_DAY+'" data-date="'+t.get("time")+'"><div class="'+de.DATE_CELL_CONTENT+'"></div></td>';a+="</tr>"}return a},b=function(e){var t=$(_.settings.month-1),n="";if(n+=" "+de.MONTH_HEADER.replace("{month}",$(_.settings.month-1).toLowerCase())+" ",n+=" "+de.SEASON_HEADER.replace("{season}",J()?J().name:"")+" ","weekly"==e){t=$(o.get("month"));n+=" "+de.MONTH_HEADER.replace("{month}",$(o.get("month")-1).toLowerCase())+" ",t+=" "+le(o.get("date"))+" - ",t+=l.get("month")!=o.get("month")?$(l.get("month"))+" "+le(l.get("date")):le(l.get("date"))}if("daily"==e){t=a.format("Do MMMM YYYY");n+=" "+de.MONTH_HEADER.replace("{month}",$(a.get("month")-1).toLowerCase())+" "}return"<div class='"+de.HEADER+" "+n+"'><div class='"+de.NAV_CONTROLS+"'>"+h("left")+h("right")+"</div><div class='"+de.HEADER_CONTENT+"'><div class='"+de.HEADER_OPTIONS_CONTAINER+"'><button class='"+de.MONTH_NAME_BUTTON+"'>"+t+"<span class='caret'></span></button><div class='"+de.HEADER_OPTIONS+"' id='headerOptionsComponent'><div class='"+de.HEADER_OPTIONS_INNER+"'><div class='"+de.HEADER_OPTIONS_BUTTONS_CONTAINER+"'><a class='"+de.HEADER_OPTIONS_BUTTON+"' href='javascript:;' data-export='calendar' data-format='pdf'>Export to .pdf</a><a class='"+de.HEADER_OPTIONS_BUTTON+"' href='javascript:;' data-export='calendar' data-format='docx'>Export to .docx</a></div><span class='caret'></span></div></div></div></div>"+f()+"</div>"},h=function(e){var t="right"==e?"&rarr;":"&larr;";return"<button class='"+de.CONTROLS_CONTAINER+"' type='submit' "+e+">"+t+"</button>"},f=function(){return _.settings.changableView?"<div class='"+de.VIEWS_LIST_CONTAINER+"'><ul class='"+de.VIEWS_LIST+"'><li class='"+de.VIEWS_ITEM+"'><button type='button' class='"+de.VIEW_BUTTON+" daily' data-toggle='calendar-view' data-option='daily'>Day</button></li><li class='"+de.VIEWS_ITEM+"'><button type='button' class='"+de.VIEW_BUTTON+" weekly' data-toggle='calendar-view' data-option='weekly'>Week</button></li><li class='"+de.VIEWS_ITEM+"'><button type='button' class='"+de.VIEW_BUTTON+" monthly' data-toggle='calendar-view' data-option='monthly'>Month</button></li></ul></div>":""},y=function(){return _.settings.disableForm?"":"<div class='"+de.ADD_MENU_CONTAINER+"' id='addMenuComponent'><div class='"+de.ADD_MENU_INNER+"'><div class='"+de.ADD_MENU_BUTTONS_CONTAINER+"'><button class='"+de.ADD_MENU_BUTTON+"' type='button' data-action='add-event'>Add Event</button><button class='"+de.ADD_MENU_BUTTON+" cancel' data-action='cancel' type='button'>Cancel</button></div><span class='caret'></span></div></div>"},E=function(){for(var e=0;e<_.eventInstances.length;e++){_.eventInstances[e].destroy()}_.eventInstances=[]},p=function(){var e=ue.CONTAINER,t=ue.ADD_MENU_BUTTON,n=ue.EXPORT_BUTTON,i=ue.EVENT_MENU_BUTTON;C(),ce(window).off("resize",C),ce(window).on("resize",C),A(),ce(window).off("resize",A),ce(window).on("resize",A),ce(e).find(t).off("click",M),ce(e).find(t).on("click",M),ce(e).find(i).off("click",k),ce(e).find(i).on("click",k),ce(e).find(n).off("click",ae),ce(e).find(n).on("click",ae),D(),j(),x(),oe(),se()},v=function(e){for(var t=q(he.CONTAINER),n=q(he.MAIN),i=q(he.DAYS_HEADING),a=q(he.DAY_CELL),s=q(he.WEEK_ROW),r=$(_.settings.month-1),o=J(),l="",c=0;c<e.length;c++){for(var d="",u=0;u<e[c].length;u++){var h="",f=e[c][u].toString(),p=e[c][u-1]?e[c][u-1].toString():"",E=a.replace("{content}",e[c][u]);if(f.length<1)h+=" "+de.EMPTY_DAY+" ",0==u&&f.length<1&&(h+=" "+de.EMPTY_DAY_BEGINNING+" "),p&&O()==p.trim()&&(h+=" "+de.EMPTY_DAY_ENDING+" "),E=E.replace("{date}","");else{h+=" "+de.DATE_DAY;var v=new Date(_.settings.month+"/"+e[c][u]+"/"+_.settings.year);E=E.replace("{date}",v.getTime())}d+=E=E.replace("{classnames}",h)}var m=q(s);l+=(m=m.replace("{row}",c+1)).replace("{content}",d)}var T="monthly";return T+=" "+de.MONTH_CALENDAR.replace("{month}",r.toLowerCase())+" ",T+=" "+de.SEASON_CALENDAR.replace("{season}",o?o.name:"")+" ",n=(n=(n=n.replace("{content}",l)).replace("{heading}",i)).replace("{classnames}",T),t=(t=(t=(t=t.replace("{header}",b())).replace("{calendar}",n)).replace("{add_menu}",y())).replace("{event_menu}",N())},m=function(){var e=O(_.settings.month,_.settings.year),t=new Date(_.settings.year,_.settings.month-1,1).getDay();return G(T(t,e),7)},T=function(e,t){var n=[];for(i=0;i<35;i++)i>=e&&i-e<t?n.push(i-e+1):n.push("");return n},O=function(e,t){var n,i="number"==typeof e?e.toString():e;return-1!=["1","3","5","7","8","10","12"].indexOf(i)?n=31:-1!=["4","6","9","11","8"].indexOf(i)?n=30:2==e&&(n=g(t)?29:28),n},g=function(e){return e%4==0},C=function(){var e=ue.DATE_CELL_CONTENT,t=ce(ue.CONTAINER+" "+ue.CALENDAR+" "+ue.WEEK_ROW+" "+ue.DATE_CELL),n=ce(t[0]).outerWidth()>_.settings.cellMaxHeigh?_.settings.cellMaxHeigh+"px":ce(t[0]).outerWidth()+"px";"monthly"!=_.settings.view&&(n="initial"),t.find(e).css({height:n}),X()},A=function(){for(var e=ce(ue.CONTAINER+" "+ue.CALENDAR+" "+ue.WEEK_ROW+" "+ue.DATE_CELL),t=ce(e[0]).outerWidth(),n=0,i=0;i<e.length;i++){var a=e.eq(i);if(a.hasClass(de.EMPTY_DAY)){var s=n*t;s=s<=0?0:-s,a.css({backgroundPosition:s+"px 0px"}),n++}}},D=function(){var e=q(ue.CONTROL_BUTTONS);ce(e).off("click",S),ce(e).on("click",S)},S=function(e){var t=e.target,n=ce(t).attr("left"),i=ce(t).attr("right"),a=q(_.settings),s=void 0!==n?"left":void 0;s=void 0!==i?"right":s,"monthly"==a.view&&R(s),"weekly"==a.view&&I(s),"daily"==a.view&&w(s),U()},R=function(e){var t=q(_.settings);"left"==e?(t.year=t.month<=1?t.year-1:t.year,t.month=t.month<=1?t.month=12:t.month-1):"right"==e&&(t.year=12<=t.month?t.year+1:t.year,t.month=12<=t.month?t.month=1:t.month+1),_.settings=ce.extend({},_.settings,t);var n=moment();o=n.get("month")+1==t.month&&n.get("year")==t.year?moment(t.year+"-"+le(t.month)+"-"+le(n.get("date"))):moment(t.year+"-"+le(t.month)+"-01"),l=moment(o).add(6,"days"),a=moment(o),s()},I=function(e){q(_.settings);"left"==e?o=moment(o).subtract(8,"day"):"right"==e&&(o=moment(l).add(1,"day")),l=moment(o).add(6,"day");moment();_.settings=ce.extend({},_.settings,{year:o.get("year"),month:o.get("month")+1}),a=moment(o),s()},w=function(e){q(_.settings);"left"==e?a=moment(a).subtract(1,"day"):"right"==e&&(a=moment(a).add(1,"day")),(a.get("time")<o.get("time")||a.get("time")>l.get("time"))&&(o=moment(a),l=moment(o).add(6,"days")),_.settings=ce.extend({},_.settings,{year:a.get("year"),month:a.get("month")+1}),s()},M=function e(t){var n=ue.ADD_MENU_BUTTON;switch(ce(ue.CONTAINER).find(n).off("click",e),ce(t.currentTarget).attr("data-action")){case"add-event":L();break;case"cancel":P()}p()},k=function(e){var t=ue.ADD_MENU_BUTTON;switch(ce(ue.CONTAINER).find(t).off("click",M),ce(e.currentTarget).attr("data-action")){case"edit-event":_.editFormModal.show(_.selectedEvent,_.selectedEvent.id);break;case"copy-event":break;case"cancel":U()}U(),p()},L=function(){var e=0<_.selection.length?_.selection[0]:null,t=1<_.selection.length?_.selection[1]:e;if(null!=e){var n={startDate:new Date(e),endDate:new Date(t)};_.createFormModal.show(n),P()}},P=function(){_.selection=[],x()},U=function(){V(!0),_.selectedEvent=void 0,_.selectedEventTarget=void 0,B()},F=function(e,t){if(!_.settings.disableForm){var n=new Date(e.startDate),i=new Date(e.endDate),a=Object.assign({},e,{title:e.title,startDate:n,endDate:i,startTime:e.startTime,endTime:e.endTime});V(!0),_.selectedEvent=Object.assign({},a),_.selectedEventTarget=ce(t.currentTarget),V(),B()}},V=function(e){if(_.selectedEventTarget){var t=ce(".cp-ev-event[data-evid="+_.selectedEventTarget.attr("data-evid")+"]");if(0<t.length){if(e)return void t.removeClass("cp-ev-event-selected");t.addClass("cp-ev-event-selected")}}},j=function(){var e=ue.DATE_DAY;ce(e).off("click",H),ce(e).on("click",H)},H=function e(t){if(ce(ue.DATE_DAY).off("click",e),!_.settings.disableForm){var n=t.currentTarget;if(!ce(t.target).hasClass("cp-ev-event")&&!ce(t.target).hasClass("cp-ev-event-label")){var i=ce(n).attr("data-date"),a=0<_.selection.length?_.selection[0]:0,s=1<_.selection.length?_.selection[1]:a;null!=i&&(i=parseInt(i),a<1||0<a&&i<a?_.selection[0]=i:i==a&&s==a?_.selection=[]:i==a?_.selection=[a]:_.selection[1]=i),x()}j()}},x=function(){var e=ue.CALENDAR,t=ue.DATE_DAY,n=de.DATE_SELECTED,i=ce(e).find(t),a=0<_.selection.length?_.selection[0]:0,s=1<_.selection.length?_.selection[1]:a;if(i&&0<i.length)for(var r=0;r<i.length;r++){var o=i.eq(r),l=ce(o).attr("data-date");if(null!=l)a<=(l=parseInt(l))&&l<=s?ce(o).hasClass(n)||ce(o).addClass(n):ce(o).hasClass(n)&&ce(o).removeClass(n)}W()},W=function(){var e=ue.CONTAINER,t=ue.ADD_MENU_CONTAINER,n=ue.DATE_SELECTED,i=de.ADD_MENU_VISIBLE,a=ce(e),s=a.find(n),r=a.find(t);s&&0<s.length?r.hasClass(i)||(r.addClass(i),U()):r.hasClass(i)&&r.removeClass(i),X()},B=function(){var e=ue.CONTAINER,t=ue.EVENT_MENU_CONTAINER,n=ue.DATE_SELECTED,i=de.EVENT_MENU_VISIBLE,a=ce(e),s=(a.find(n),a.find(t));_.selectedEventTarget&&0<_.selectedEventTarget.length?s.hasClass(i)||(s.addClass(i),P()):(s.hasClass(i)&&s.removeClass(i),_.selectedEventTarget=void 0),Y()},Y=function(){var e=ue.EVENT_MENU_CONTAINER,t=ue.CONTAINER,n=de.EVENT_MENU_ABOVE,i=_.selectedEventTarget,a=ce(t).find(e),s=z();if(null!=i&&null!=i){var r=i.offset(),o=r?r.left:0,l=r?r.top+i.outerHeight()-10:0;i.outerWidth()>a.outerWidth()?o+=(i.outerWidth()-a.outerWidth())/2:o-=(a.outerWidth()-i.outerWidth())/2,a.outerHeight()+l>s.height?(l=r?r.top-a.outerHeight()+10:0,a.hasClass(n)||a.addClass(n)):a.hasClass(n)&&a.removeClass(n),a.css({top:l,left:o})}},X=function(){var e=ue.ADD_MENU_CONTAINER,t=ue.CONTAINER,n=de.ADD_MENU_ABOVE,i=K(),a=ce(t).find(e),s=z();if(null!=i&&null!=i){var r=i.offset(),o=r?r.left:0,l=r?r.top+i.outerHeight()-10:0;i.outerWidth()>a.outerWidth()?o+=(i.outerWidth()-a.outerWidth())/2:o-=(a.outerWidth()-i.outerWidth())/2,a.outerHeight()+l>s.height?(l=r?r.top-a.outerHeight()+10:0,a.hasClass(n)||a.addClass(n)):a.hasClass(n)&&a.removeClass(n),a.css({top:l,left:o})}},G=function(e,t){for(var n=[],i=0;i<e.length;i+=t)n.push(e.slice(i,i+t));return n},q=function(e){return JSON.parse(JSON.stringify(e))},$=function(e){return null==pe[e]?"":pe[e]},J=function(){for(var e in _.settings.seasons){var t=_.settings.seasons[e];if(null!=t&&-1!=t.months.indexOf(_.settings.month))return{name:e,display_name:t.display_name}}return null},K=function(){var e=0<_.selection.length?_.selection[0]:null,t=1<_.selection.length?_.selection[1]:e;return t&&(t=ce(ue.CONTAINER).find('[data-date="'+t+'"]')),t},z=function(){return{width:ce(document).outerWidth(),height:ce(document).outerHeight()}},Z=function(){i&&4!=i.readyState&&i.abort();var e=_.settings.list_url||_.settings.url||null;if(e)var t=ce.extend({},_.settings.data,{month:_.settings.month,year:_.settings.year}),n=ce.extend({},_.settings.headers),i=ce.ajax({url:e,method:"GET",data:t,headers:n}).done(Q).fail(ee)},Q=function(e){_.events=te(e),function(){E();for(var e,t,n,i,a,s=ue.CALENDAR,r=ue.WEEK_ROW,o=ue.DATE_CELL,l=ue.DATE_CELL_CONTENT,c=(ce(s).find(r),ce(s).find(o)),d=0;d<c.length;d++)if(t=c.eq(d),"number"==typeof(n=parseInt(t.attr("data-date")))&&0<=n)for(var u=0;u<_.events.length;u++){var h=_.events[u];if(i=new Date(h.startDate+" "+h.startTime).getTime(),a=new Date(h.endDate+" "+h.endTime).getTime(),n>=moment(moment(i).format("YYYY-MM-DD 00:00:00")).get("time")&&n<=moment(moment(a).format("YYYY-MM-DD 23:59:59")).get("time")){var f=moment(moment(n).format("YYYY-MM-DDT"+h.startTime)).get("time"),p=moment(moment(n).format("YYYY-MM-DDT"+h.endTime)).get("time");("monthly"==_.settings.view||f<=n&&n<=p)&&((e=new CPEvent(h,t.find(l),void 0,o,{onClick:F})).render(),_.eventInstances.push(e))}}}()},ee=function(e){if("abort"!=e.statusText){var t="Failed to load events.";t=e.message&&0<e.message.length?e.message:t}},te=function(e){if(null===_.settings.respData)return e;if("string"!=typeof _.settings.respData)return console.error(new Error("Data path invalid, please contact system's admin.")),e;var t=q(_.settings.respData);t=(t=t.trim()).split(".");for(var n=q(e),i=0;i<t.length;i++)n.hasOwnProperty(t[i])&&(n=n[t[i]]);if(n)for(i=0;i<n.length;i++)n[i]=ne(n[i]);return n},ne=function(e){if(_.settings.map&&_.settings.map.constructor==Object){for(var t=Object.assign({},e),n=Object.keys(_.settings.map),i=0;i<n.length;i++)t[n[i]]=ie(e,_.settings.map[n[i]]);return t}return e},ie=function(e,t){if("string"!=typeof t)return console.error(new Error("Data path invalid, please contact system's admin.")),e;var n=q(t);n=(n=n.trim()).split(".");for(var i=q(e),a=!1,s=0;s<n.length;s++)i.hasOwnProperty(n[s])&&(i=i[n[s]],a=!0);return a?i:null},ae=function(e){e.preventDefault();var t=ce(e.currentTarget),n=ue.CONTAINER_ID;t.attr("data-format"),ce("#"+n)},se=function(){ce(ue.VIEW_SELECTOR).off("click",re),ce(ue.VIEW_SELECTOR).on("click",re)},re=function(e){var t=ce(e.currentTarget).attr("data-option");-1==_.viewOptions.indexOf(t)&&(t="monthly"),_.settings.view!=t&&(_.settings=ce.extend({},_.settings,{view:t}),P(),setTimeout(s,200))},oe=function(){var e=ue.VIEWS_LIST_CONTAINER,t=ce(e).find("[data-option='"+_.settings.view+"']");0<t.length&&(t.hasClass(de.ACTIVE)||(ce(e).find("[data-toggle='calendar-view']").removeClass(de.ACTIVE),t.addClass(de.ACTIVE)))},le=function(e){return"number"==typeof e&&(e=e.toString()),2<=e.trim().length?e:"0"+e}};ce.fn.CalendarPlugin=e.init,ce.fn.call=function(e,t,n){return e.apply(n||this,t),this}}(jQuery);var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var CPEvent=function(){function r(e,t,n,i,a){_classCallCheck(this,r);var s=new Date;this.PREFIX="cp-ev",this.uniqueID=this.PREFIX+s.getTime()+""+Math.ceil(100*Math.random()),this.container=t,this.week=n,this.cellSelector=i,this.event=null,this.data=e,this.start=null,this.options=$.extend({onClick:null},a),this.html=this.html.bind(this),this.render=this.render.bind(this),this.SELECTORS=this.SELECTORS.bind(this),this.CLASSNAMES=this.CLASSNAMES.bind(this),this.componentDidRender=this.componentDidRender.bind(this),this.reposition=this.reposition.bind(this),this.resize=this.resize.bind(this),this.set_start_end=this.set_start_end.bind(this),this.destroy=this.destroy.bind(this)}return _createClass(r,[{key:"SELECTORS",value:function(){return{BODY:"body",FORM:"."+this.PREFIX+"-form",FIELDSET:"fieldset",MODAL:"."+this.PREFIX+"-modal",BUTTON:"."+this.PREFIX+"-button",TITLE:'input[name="event-title"]',END_TIME:'input[name="end-time"]',END_DATE:'input[name="end-date"]',START_DATE:'input[name="start-date"]',START_TIME:'input[name="start-time"]',ERROR_CONTAINER:"."+this.PREFIX+"-error-container"}}},{key:"CLASSNAMES",value:function(){return{CONTAINER:this.PREFIX+"-event-container",EVENT:this.PREFIX+"-event",LABEL:this.PREFIX+"-event-label",START:"start",END:"end",HIGHLIGHTED:"highlighted"}}}]),_createClass(r,[{key:"componentDidRender",value:function(){this.event=this.container.find("#"+this.uniqueID),this.listeners()}},{key:"render",value:function(){this.container.append(this.html()),this.componentDidRender()}},{key:"html",value:function(){return"<button class='"+this.CLASSNAMES().EVENT+"' id='"+this.uniqueID+"' data-evid='"+this.data.id+"' title='"+this.title()+"'><span class='"+this.CLASSNAMES().LABEL+"'>"+this.data.title+"</span></button>"}},{key:"title",value:function(){return this.data.title+" ("+this.data.startDate+" - "+this.data.endDate+")"}},{key:"listeners",value:function(){"function"==typeof this.options.onClick&&(this.event.off("click",this.handle_on_click.bind(this)),this.event.on("click",this.handle_on_click.bind(this))),this.event.off("mouseenter",this.handle_on_mouse_enter.bind(this)),this.event.on("mouseenter",this.handle_on_mouse_enter.bind(this)),this.event.off("mouseleave",this.handle_on_mouse_leave.bind(this)),this.event.on("mouseleave",this.handle_on_mouse_leave.bind(this))}},{key:"handle_on_click",value:function(e){this.options.onClick(this.data,e)}},{key:"handle_on_mouse_enter",value:function(e){var t=this.event.attr("data-evid");null!=t&&$('[data-evid="'+t+'"]').addClass(this.CLASSNAMES().HIGHLIGHTED)}},{key:"handle_on_mouse_leave",value:function(e){var t=this.event.attr("data-evid");null!=t&&$('[data-evid="'+t+'"]').removeClass(this.CLASSNAMES().HIGHLIGHTED)}},{key:"reposition",value:function(){}},{key:"resize",value:function(){var e=new Date(this.data.startDate),t=new Date(this.data.endDate),n=this.start.offset().left,i=this.end.offset().left+this.end.outerWidth();e.getTime()==parseInt(this.start.attr("data-date"))&&(n+=15,this.event.hasClass(this.CLASSNAMES().START)||this.event.addClass(this.CLASSNAMES().START)),t.getTime()==parseInt(this.end.attr("data-date"))&&(i-=15,this.event.hasClass(this.CLASSNAMES().END)||this.event.addClass(this.CLASSNAMES().END));var a=i-n;this.event.css({width:a+"px"})}},{key:"set_start_end",value:function(){for(var e=new Date(this.data.startDate),t=new Date(this.data.endDate),n=this.week.find(this.cellSelector),i=null,a=null,s=0;s<n.length;s++){var r=n.eq(s),o=parseInt(r.attr("data-date"));if(null==i&&(i=o>=e.getTime()&&o<=t.getTime()||o==e.getTime()?r:null),null==a&&(n.length-1!=s&&o!=t.getTime()||(a=r)),null!=i&&null!=a)break}this.start=i,this.end=a}},{key:"destroy",value:function(){this.event.remove(),this.event=null}}]),r}(),_typeof=(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e});_createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var CPEventFormModal=function(){function i(e,t){var n=this;_classCallCheck(this,i),Object.defineProperty(this,"SELECTORS",{enumerable:!0,writable:!0,value:function(){return{BODY:"body",FORM:"."+n.PREFIX+"-form",FIELDSET:"fieldset",MODAL:"."+n.PREFIX+"-modal",BUTTON:"."+n.PREFIX+"-button",TITLE:'input[name="event-title"]',END_TIME:'input[name="end-time"]',END_DATE:'input[name="end-date"]',START_DATE:'input[name="start-date"]',START_TIME:'input[name="start-time"]',ERROR_CONTAINER:"."+n.PREFIX+"-error-container"}}}),Object.defineProperty(this,"CLASSNAMES",{enumerable:!0,writable:!0,value:function(){return{SHOW:"show",CANCEL:"cancel",SAVE:"save",DELETE:"delete"}}}),Object.defineProperty(this,"PREFIX",{enumerable:!0,writable:!0,value:"cp-ef"}),Object.defineProperty(this,"fields",{enumerable:!0,writable:!0,value:[]}),this.uniqueID=e,this.id=null,this.modal=null,this.options=Object.assign({url:null,edit:!1,onWillShow:null,onShown:null,onWillHide:null,onHidden:null,onDelete:null,fieldsList:[]},t),this.html=this.html.bind(this),this.render=this.render.bind(this),this.componentDidRender=this.componentDidRender.bind(this)}return _createClass(i,[{key:"componentDidRender",value:function(){this.modal=$("#"+this.uniqueID),this.listeners()}},{key:"render",value:function(){var e=this,t=this.SELECTORS().BODY,n=$("#"+this.uniqueID);0<n.length&&n.remove(),$(this.html().trim()).attr("id",this.uniqueID).appendTo(t).call(function(){return e.renderFields()}).call(function(){return e.componentDidRender()})}},{key:"html",value:function(){var n=this;return('\n            <div class="'+this.PREFIX+'-modal">\n                <div class="'+this.PREFIX+'-backdrop">&nbsp;</div>\n                <div class="'+this.PREFIX+'-content">\n                    <div class="'+this.PREFIX+'-dialog">\n                        <form action="javascript:;" class="'+this.PREFIX+'-form" method="POST">\n                            <fieldset>\n                            '+(this.options.fieldsList.constructor==Array?this.options.fieldsList.map(function(e,t){return n.renderFieldsList(e,t)}).join(""):null)+'\n                                <div class="'+this.PREFIX+'-actions">\n                                    '+(this.options.editting?'<button type="button" \n                                            class="'+this.PREFIX+'-button delete"\n                                        > Delete </button>':"")+'\n                                    <button type="button" class="'+this.PREFIX+"-button "+this.CLASSNAMES().CANCEL+'">Cancel</button>\n                                    <button type="submit" class="'+this.PREFIX+"-button "+this.CLASSNAMES().SAVE+'">Save</button>\n                                </div>\n                            </fieldset>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        ').trim()}},{key:"renderFieldsList",value:function(e,t){var n=this;if(e.constructor!=Array)return null;var i=""+this.uniqueID+this.PREFIX+"-group"+t;return('\n            <div\n                class="'+this.PREFIX+'-group"\n            >\n                '+e.map(function(e,t){return n.makeField(e,i,t)}).join("")+"\n            </div>\n        ").trim()}},{key:"makeField",value:function(e,t,n){var i=""+t+this.PREFIX+"-group-item"+n,a="#"+i;if(e&&"object"==(void 0===e?"undefined":_typeof(e))&&e.constructor==Object&&Object.keys(e))switch(e.type){case"text":this.fields.push(new CPFText(a,_extends({},e)));break;case"date":this.fields.push(new CPFDate(a,_extends({},e)));break;case"select":this.fields.push(new CPFSelect(a,_extends({},e)));break;case"radio":this.fields.push(new CPFRadioGroup(a,_extends({},e)));break;case"time":this.fields.push(new CPFTime(a,_extends({},e)))}return'<div class="'+this.PREFIX+'-group-item" id="'+i+'"></div>'}},{key:"fieldHtmlType",value:function(e){switch(e){case"select":return"select";case"long-text":return"textarea";default:return"input"}}},{key:"renderFields",value:function(){if(this.fields&&this.fields.constructor==Array)for(var e=0;e<this.fields.length;e++)this.fields[e].render()}},{key:"listeners",value:function(){var e=this.SELECTORS(),t=e.BUTTON,n=e.FORM;this.modal.find(t).off("click",this.handleButtonClick.bind(this)),this.modal.find(t).on("click",this.handleButtonClick.bind(this)),this.modal.find(n).off("submit",this.handleFormSubmit.bind(this)),this.modal.find(n).on("submit",this.handleFormSubmit.bind(this)),this.modal.find(n).off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",this.handleFormTransitionEnd.bind(this)),this.modal.find(n).on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",this.handleFormTransitionEnd.bind(this))}},{key:"handleButtonClick",value:function(e){var t=this.CLASSNAMES(),n=t.CANCEL,i=(t.SAVE,t.DELETE),a=$(e.currentTarget);a.hasClass(n)&&this.hide(),a.hasClass(i)&&this.confirmDelete()}},{key:"handleFormSubmit",value:function(e){e.preventDefault(),this.validate()?this.showValidationError():(this.hideValidationError(),this.save())}},{key:"handleFormTransitionEnd",value:function(e){}},{key:"show",value:function(e,t){if(this.hasRendered()){this.reset(e),this.id=t||null;var n=this.CLASSNAMES().SHOW;this.modal.hasClass(n)||this.modal.addClass(n)}}},{key:"confirmDelete",value:function(){confirm("Are you sure you want to delete, this event?"),this.delete()}},{key:"hide",value:function(){if(this.hasRendered()){var e=this.CLASSNAMES().SHOW;this.modal.hasClass(e)&&this.modal.removeClass(e)}}},{key:"hasRendered",value:function(){return null!=this.modal&&null!=this.modal&&0<this.modal.length}},{key:"reset",value:function(e){var t=void 0;this.hideValidationError();for(var n=0;n<this.fields.length;n++)t=this.fields[n],e.hasOwnProperty(t.name)&&t.setValue(e[t.name])}},{key:"formatDate",value:function(e){var t=e.getFullYear(),n=e.getMonth()+1,i=e.getDate();return this.leadingZero(n)+"/"+this.leadingZero(i)+"/"+t}},{key:"leadingZero",value:function(e){return"string"!=typeof e&&"number"!=typeof e?"0":("number"==typeof e&&(e=e.toString()),1<e.length?e:"0"+e)}},{key:"validate",value:function(){if(!this.modal)return"An unknow error has occured.";this.getFormData();return!1}},{key:"showValidationError",value:function(){var e=this.validate();if(e){var t=this.SELECTORS(),n=t.FORM,i=t.ERROR_CONTAINER,a=this.CLASSNAMES().SHOW,s=this.modal.find(n).find(i);!s||s.length<1||(s.text(e),s.hasClass(a)||s.addClass(a))}}},{key:"hideValidationError",value:function(){var e=this.SELECTORS(),t=e.FORM,n=e.ERROR_CONTAINER,i=this.CLASSNAMES().SHOW,a=this.modal.find(t).find(n);!a||a.length<1||(a.text(""),a.hasClass(i)&&a.removeClass(i))}},{key:"disable",value:function(e){var t=this.SELECTORS(),n=t.FORM,i=t.FIELDSET,a=t.BUTTON;e=!!e,this.modal.find(n).find(i).attr("disabled",e),this.modal.find(n).find(a).attr("disabled",e)}},{key:"timeRegex",value:function(e){"string"!=typeof e&&(e+="");return/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test(e)}},{key:"getFormData",value:function(){for(var e={},t=0;t<this.fields.length;t++)e[this.fields[t].name]=this.fields[t].getValue();return e}},{key:"save",value:function(){if(null!=this.buildUrl()){var e=Object.assign({},this.options.data,this.getFormData());e=this.addStructs(e);var t=Object.assign({},this.options.headers);this.disable(!0),$.ajax({url:this.options.url,data:e,headers:t,method:this.options.editting?"PUT":"POST"}).done(this.saveDone.bind(this)).fail(this.saveFailed.bind(this))}}},{key:"saveDone",value:function(e){"function"==typeof this.options.onSaved&&this.options.onSaved();var t=this;setTimeout(function(){t.disable(!1),t.hide()},800)}},{key:"saveFailed",value:function(e){this.disable(!1);var t="Failed to"+(this.options.editting?" save changes.":" save new event.");t=e.message&&0<e.message.length?e.message:t;alert(t)}},{key:"addStructs",value:function(e){if(this.options.requestStruct){var t=JSON.parse(JSON.stringify(this.options.requestStruct));for(var n in t)"string"==typeof t[n]&&void 0!==e[n]&&void 0===e[t[n]]&&(e[t[n]]=JSON.parse(JSON.stringify(e[n])),delete e[n])}return e}},{key:"delete",value:function(){if(null!=this.buildUrl("delete")){var e=Object.assign({},this.options.data),t=Object.assign({},this.options.headers);this.disable(!0),$.ajax({url:this.options.url,data:e,headers:t,method:"DELETE"}).done(this.deleteDone.bind(this)).fail(this.deleteFailed.bind(this))}}},{key:"deleteDone",value:function(e){"function"==typeof this.options.onDelete&&this.options.onDelete();var t=this;setTimeout(function(){t.disable(!1),t.hide()},800)}},{key:"deleteFailed",value:function(e){this.disable(!1);var t="Could not delete event, please try again in a moment.";t=e.message&&0<e.message.length?e.message:t;alert(t)}},{key:"buildUrl",value:function(e){if(!(e=!!e)&&null==this.options.url||e&&null==this.options.deleteUrl)return null;var t=e?JSON.parse(JSON.stringify(this.options.deleteUrl)):JSON.parse(JSON.stringify(this.options.url)),n=new RegExp(/^(:id)$/,"ig");return this.options.editting&&(n.test(t)?t=t.replace(n,this.id):this.options.data=Object.assign({},this.options.data,{id:this.id})),t}},{key:"destroy",value:function(){if(this.fields||this.fields.constructor==Array)for(var e=0;e<this.fields.length;e++)this.fields[e].destroy();$(this.uniqueID).remove(),this.fields=[]}}]),i}();_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var CPField=function(){function i(e,t){_classCallCheck(this,i),Object.defineProperty(this,"container",{enumerable:!0,writable:!0,value:null}),Object.defineProperty(this,"props",{enumerable:!0,writable:!0,value:{}}),Object.defineProperty(this,"prefix",{enumerable:!0,writable:!0,value:"cp-ef"}),Object.defineProperty(this,"id",{enumerable:!0,writable:!0,value:null}),Object.defineProperty(this,"type",{enumerable:!0,writable:!0,value:null}),Object.defineProperty(this,"state",{enumerable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,writable:!0,value:null}),Object.defineProperty(this,"idAttribute",{enumerable:!0,writable:!0,value:"data-cpf-id"}),Object.defineProperty(this,"fieldSelector",{enumerable:!0,writable:!0,value:null}),Object.defineProperty(this,"containerSelector",{enumerable:!0,writable:!0,value:null}),this.container=e,this.props=Object.assign({},this.props,t);var n=new Date;this.id=""+n.getTime()+2e3*Math.random(),this.name=t.name||null,this.fieldSelector=this.htmlType()+'[name="'+this.name+'"]',this.containerSelector="["+this.idAttribute+'="'+this.id+'"]'}return _createClass(i,[{key:"render",value:function(){$(this.container).call(this.handleWillRender.bind(this)).html(this.content().trim()).call(this.handleCompletedRender.bind(this))}},{key:"label",value:function(){return"string"==typeof this.props.label?('\n                <label \n                    for="'+this.props.name+'"\n                >\n                    '+this.props.label+"\n                </label>\n            ").trim():null}},{key:"placeholder",value:function(){return"string"==typeof this.props.placeholder&&0<this.props.placeholder.trim().length?this.props.placeholder:null}},{key:"handleWillRender",value:function(){"function"==typeof this.willRender&&this.willRender()}},{key:"handleCompletedRender",value:function(){"function"==typeof this.completedRender&&this.completedRender()}},{key:"setDefaultValue",value:function(){if(null!=this.props.defaultValue)switch(this.type){case"text":case"time":$(this.containerSelector).children('input[type="'+this.type+'"]').val(this.props.defaultValue);break;case"radio":$(this.containerSelector).children('input[value="'+this.props.defaultValue+'"]').props("checked",!0);break;case"date":$(this.containerSelector).children('input[type="date"]').val(this.formatDate(this.props.defaultValue))}}},{key:"formatDate",value:function(e){var t=(e=new Date(e)).getFullYear(),n=e.getMonth()+1,i=e.getDate();return t+"-"+this.leadingZero(n)+"-"+this.leadingZero(i)}},{key:"leadingZero",value:function(e){return"string"!=typeof e&&"number"!=typeof e?"0":("number"==typeof e&&(e=e.toString()),1<e.length?e:"0"+e)}},{key:"setState",value:function(e,t){var n=_extends({},this.state);this.state=Object.assign({},n,e),"function"==typeof t&&t(),"function"==typeof this.componentChanged&&(this.componentChanged(n),this.setDefaultValue())}},{key:"setValue",value:function(e){"date"==this.type&&(e=this.formatDate(e)),"radio"!=this.type?$(this.containerSelector).children(this.htmlType()+'[name="'+this.name+'"]').val(e):$(this.containerSelector).children(this.htmlType()+'[value="'+e+'"]').prop("checked",!0)}},{key:"getValue",value:function(){return $(this.containerSelector).children(this.fieldSelector).val()}},{key:"htmlType",value:function(){switch(this.props.type){case"long-text":return"textarea";case"select":return"select";default:return"input"}}},{key:"destory",value:function(){$(this.containerSelector).remove()}}]),i}(),AllowedCPFTypes=["select","text","long-text","email","color-picker","date","time","image","number","phone","pdf","word-doc","spreadsheet","checkbox"];_createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var CPFDate=function(e){function i(e,t){_classCallCheck(this,i);var n=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t));return n.type="date",n}return _inherits(i,CPField),_createClass(i,[{key:"content",value:function(){return'\n            <div class="'+this.prefix+'-control-group" '+this.idAttribute+'="'+this.id+'">\n                '+this.label()+'\n                <input \n                    type="date"\n                    name="'+this.props.name+'"\n                    autoComplete="off"\n                    class="'+this.prefix+'-form-control"\n                    '+(this.placeholder()?'placeholder="'+this.placeholder()+'"':"DD/MM/YYYY")+"\n                />\n            </div>\n        "}}]),i}();_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var CPFRadioGroup=function(e){function i(e,t){_classCallCheck(this,i);var n=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t));return Object.defineProperty(n,"renderOptions",{enumerable:!0,writable:!0,value:function(e,t){return(' \n            <div\n                class="'+n.prefix+'-form-control radio-group"\n            >\n                <label class="'+n.prefix+'-radio-option">\n                    <input\n                        name="'+n.props.name+'"\n                        type="radio" \n                        value="'+e+'"\n                        '+(n.props.defaultValue==e?"checked":"")+"\n                    />\n                    <span>"+t+"</span>\n                </label>\n            </div>\n        ").trim()}}),n.type="radio",n}return _inherits(i,CPField),_createClass(i,[{key:"content",value:function(){var t=this;if(this.props.options.constructor!=Object)return"";var n=_extends({},this.props.options),e=Object.keys(n);return'\n            <div class="'+this.prefix+'-control-group radio-group" '+this.idAttribute+'="'+this.id+'">\n                '+this.label()+"\n                "+e.map(function(e){return t.renderOptions(e,n[e])}).join("")+"\n            </div>\n        "}},{key:"getValue",value:function(){for(var e=$(this.containerSelector).find(this.fieldSelector),t=0;t<=e.length;t++){var n=e.eq(t);if(n.is(":checked"))return n.val()}return""}}]),i}();_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var CPFSelect=function(e){function i(e,t){_classCallCheck(this,i);var n=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t));return Object.defineProperty(n,"renderOptions",{enumerable:!0,writable:!0,value:function(e,t){return('<option \n            value="'+e+'"\n            '+(n.props.defaultValue==e?"selected":"")+"\n        >\n            "+t+"\n        </option>").trim()}}),n.type="select",n}return _inherits(i,CPField),_createClass(i,[{key:"content",value:function(){var t=this;if(this.props.options.constructor!=Object)return"";var n=_extends({"":this.placeholder()},this.props.options),e=Object.keys(n);return'\n            <div class="'+this.prefix+'-control-group" '+this.idAttribute+'="'+this.id+'">\n                '+this.label()+'\n                <select\n                    name="'+this.props.name+'"\n                    class="'+this.prefix+'-form-control"\n                >\n                    '+e.map(function(e){return t.renderOptions(e,n[e])}).join("")+"\n                </select>\n            </div>\n        "}}]),i}();_createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var CPFText=function(e){function i(e,t){_classCallCheck(this,i);var n=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t));return n.type="text",n}return _inherits(i,CPField),_createClass(i,[{key:"content",value:function(){return'\n            <div class="'+this.prefix+'-control-group" '+this.idAttribute+'="'+this.id+'">\n                '+this.label()+'\n                <input \n                    type="text"\n                    name="'+this.props.name+'"\n                    autoComplete="off"\n                    class="'+this.prefix+'-form-control"\n                    '+(this.placeholder()?'placeholder="'+this.placeholder()+'"':"")+"\n                />\n            </div>\n        "}}]),i}();_createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var CPFTime=function(e){function i(e,t){_classCallCheck(this,i);var n=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t));return n.type="time",n}return _inherits(i,CPField),_createClass(i,[{key:"content",value:function(){return'\n            <div class="'+this.prefix+'-control-group" '+this.idAttribute+'="'+this.id+'">\n                '+this.label()+'\n                <input \n                    type="time"\n                    name="'+this.props.name+'"\n                    autoComplete="off"\n                    class="'+this.prefix+'-form-control"\n                    '+(this.placeholder()?'placeholder="'+this.placeholder()+'"':"")+"\n                />\n            </div>\n        "}}]),i}();